let isLoading=!1;const currentUrl=window.location.href,zmzLoadMore=async button=>{if(isLoading)return;isLoading=!0;const loadMoreWrapper=document.querySelector("#zmz-load-more");if(!loadMoreWrapper)return;button=loadMoreWrapper.querySelector("#zmz-load-button")||button;const dataInfinite=loadMoreWrapper.getAttribute("data-infinite"),loadMoreSpinner=loadMoreWrapper.querySelector(".load-more__spinner"),paginationList=document.querySelector(".pagination"),gridContainer=document.querySelector(".product-grid");if(button)try{dataInfinite=="false"&&button.classList.add("hidden");const nextDataUrl=button.getAttribute("data-next-url"),nextUrl=new URL(nextDataUrl,currentUrl).href;gridContainer.classList.add("loading"),loadMoreSpinner.classList.remove("hidden");const response=await fetch(nextUrl);if(!response.ok)throw new Error(`HTTP error ${response.status}`);const data=await response.text(),parser=new DOMParser,newPage=parser.parseFromString.bind(parser)(data,"text/html");if(newPage){dataInfinite=="false"&&button.classList.remove("hidden");const grid=document.querySelector("[data-grid-js]");grid.innerHTML+=newPage.querySelector("[data-grid-js]").innerHTML,activeCompare(),activeWishlist(),document.querySelector("#zmz-load-more").replaceWith(newPage.querySelector("#zmz-load-more")),paginationList&&paginationList.replaceWith(newPage.querySelector(".pagination"))}if(dataInfinite==="false"){const event=new CustomEvent("zmz.paginate.next");document.querySelector("#zmz-load-more").dispatchEvent(event),paginationList&&document.querySelector(".pagination").dispatchEvent(event)}}catch(error){console.error("Failed to load more products:",error)}finally{isLoading=!1,gridContainer.classList.remove("loading"),loadMoreSpinner.classList.add("hidden"),dataInfinite=="false"&&button.classList.remove("hidden")}},handleInfiniteScroll=()=>{const loadTarget=document.querySelector("#zmz-load-more");if(!loadTarget||loadTarget.getAttribute("data-infinite")!="true")return;const buttonTarget=loadTarget.querySelector("#zmz-load-button");if(!loadTarget||!buttonTarget)return;const scrollOffset=100,targetScroll=loadTarget.offsetTop;window.innerHeight+window.pageYOffset>=targetScroll-scrollOffset&&zmzLoadMore()};window.addEventListener("scroll",handleInfiniteScroll);
//# sourceMappingURL=/cdn/shop/t/4/assets/collection-load-more.js.map?v=71812971896406052881704978794
