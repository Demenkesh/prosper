class StickyProductComponent extends HTMLElement{static get observedAttributes(){return["data-sticky-id","data-sticky-layout"]}constructor(){super(),this.currentLayout="default",this.productForm=document.querySelector("[data-sticky-target]"),this.footer=document.querySelector(".section-footer"),this.totalHeight=document.body.clientHeight,this.moveStickyElements=this.moveStickyElements.bind(this),this.handleScroll=this.handleScroll.bind(this)}connectedCallback(){document.addEventListener("DOMContentLoaded",function(){this.currentLayout="default";const cloneTargetAtc=document.querySelector("[product-form-sticky-js]").cloneNode(!0);document.querySelector('[data-target-id="atc"]').append(cloneTargetAtc)}),window.addEventListener("scroll",this.handleScroll)}disconnectedCallback(){window.removeEventListener("scroll",this.handleScroll)}moveStickyElements(){const STICKY_ID_ATTR="data-sticky-id",STICKY_LAYOUT_ATTR="data-sticky-layout";document.querySelectorAll(`[${STICKY_LAYOUT_ATTR}~="${this.currentLayout}"]`).forEach(function(stickyLayout){if(stickyLayout.childElementCount!==0)return;const targetNode=stickyLayout,id=stickyLayout.getAttribute(STICKY_ID_ATTR);document.querySelectorAll(`[${STICKY_ID_ATTR}="${id}"]`).forEach(function(item){if(item.getAttribute(STICKY_LAYOUT_ATTR)===this.currentLayout||item.childElementCount===null)return;const targetButton=item.querySelector("[btn-wishlist-js], [btn-compare-js]");targetNode.append(targetButton)}.bind(this))}.bind(this)),document.documentElement.style.setProperty("--sticky-prod-height",`${Math.floor(this.offsetHeight-5)}px`)}handleScroll(){if(!this.productForm)return;this.querySelector(".product-form__error-message-wrapper:not([hidden])")?.setAttribute("hidden","");let scrolled=Math.ceil(this.scrollY)||Math.ceil(document.documentElement.scrollTop),windowHeight=window.innerHeight,scrollTarget=this.productForm.offsetTop+this.productForm.offsetHeight+this.productForm.clientHeight,scrollTargetEnd=this.footer.getBoundingClientRect().bottom;if(scrolled>=scrollTarget&&windowHeight<=scrollTargetEnd-100?setTimeout(()=>{this.classList.remove("hidden")},200):this.classList.add("hidden"),this.classList.contains("hidden"))this.currentLayout="default",this.moveStickyElements(),this.style.transform="translateY(100%)";else{let layout="sticky";layout!==this.currentLayout&&(this.currentLayout=layout,this.moveStickyElements()),this.style.transform="translateY(0)"}}}customElements.define("sticky-product-component",StickyProductComponent);
//# sourceMappingURL=/cdn/shop/t/4/assets/sticky-func-button.js.map?v=31793479141056085761704978797
